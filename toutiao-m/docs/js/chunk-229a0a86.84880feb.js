(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-229a0a86"],{"0653":function(t,e,i){"use strict";i("68ef"),i("5c56")},1146:function(t,e,i){},"34e9":function(t,e,i){"use strict";var n=i("2638"),r=i.n(n),s=i("d282"),a=i("ba31"),o=i("b1d2"),l=Object(s["a"])("cell-group"),c=l[0],u=l[1];function h(t,e,i,n){var s,l=t("div",r()([{class:[u(),(s={},s[o["f"]]=e.border,s)]},Object(a["b"])(n,!0)]),[null==i.default?void 0:i.default()]);return e.title||i.title?t("div",[t("div",{class:u("title")},[i.title?i.title():e.title]),l]):l}h.props={title:String,border:{type:Boolean,default:!0}},e["a"]=c(h)},"40db":function(t,e,i){},4598:function(t,e,i){"use strict";(function(t){i.d(e,"c",(function(){return c})),i.d(e,"b",(function(){return u})),i.d(e,"a",(function(){return h}));var n=i("a142"),r=Date.now();function s(t){var e=Date.now(),i=Math.max(0,16-(e-r)),n=setTimeout(t,i);return r=e+i,n}var a=n["g"]?t:window,o=a.requestAnimationFrame||s,l=a.cancelAnimationFrame||a.clearTimeout;function c(t){return o.call(a,t)}function u(t){c((function(){c(t)}))}function h(t){l.call(a,t)}}).call(this,i("c8ba"))},"482d":function(t,e,i){"use strict";function n(t,e,i){return Math.min(Math.max(t,e),i)}function r(t,e,i){var n=t.indexOf(e),r="";return-1===n?t:"-"===e&&0!==n?t.slice(0,n):("."===e&&t.match(/^(\.|-\.)/)&&(r=n?"-0":"0"),r+t.slice(0,n+1)+t.slice(n).replace(i,""))}function s(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),t=e?r(t,".",/\./g):t.split(".")[0],t=i?r(t,"-",/-/g):t.replace(/-/,"");var n=e?/[^-0-9.]/g:/[^-0-9]/g;return t.replace(n,"")}i.d(e,"b",(function(){return n})),i.d(e,"a",(function(){return s}))},5246:function(t,e,i){"use strict";i("68ef"),i("9d70"),i("3743"),i("8a0b")},"565f":function(t,e,i){"use strict";var n=i("2638"),r=i.n(n),s=i("c31d"),a=i("a142");function o(){return!a["g"]&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase())}var l=i("a8c1"),c=o();function u(){c&&Object(l["g"])(Object(l["b"])())}var h=i("482d"),f=i("1325"),d=i("d282"),m=i("ea8e"),g=i("ad06"),v=i("7744"),p=i("dfaf"),b=Object(d["a"])("field"),y=b[0],F=b[1];e["a"]=y({inheritAttrs:!1,provide:function(){return{vanField:this}},inject:{vanForm:{default:null}},props:Object(s["a"])({},p["a"],{name:String,rules:Array,disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},autosize:[Boolean,Object],leftIcon:String,rightIcon:String,clearable:Boolean,formatter:Function,maxlength:[Number,String],labelWidth:[Number,String],labelClass:null,labelAlign:String,inputAlign:String,placeholder:String,errorMessage:String,errorMessageAlign:String,showWordLimit:Boolean,value:{type:[Number,String],default:""},type:{type:String,default:"text"},error:{type:Boolean,default:null},colon:{type:Boolean,default:null},clearTrigger:{type:String,default:"focus"},formatTrigger:{type:String,default:"onChange"}}),data:function(){return{focused:!1,validateFailed:!1,validateMessage:""}},watch:{value:function(){this.updateValue(this.value),this.resetValidation(),this.validateWithTrigger("onChange"),this.$nextTick(this.adjustSize)}},mounted:function(){this.updateValue(this.value,this.formatTrigger),this.$nextTick(this.adjustSize),this.vanForm&&this.vanForm.addField(this)},beforeDestroy:function(){this.vanForm&&this.vanForm.removeField(this)},computed:{showClear:function(){var t=this.getProp("readonly");if(this.clearable&&!t){var e=Object(a["c"])(this.value)&&""!==this.value,i="always"===this.clearTrigger||"focus"===this.clearTrigger&&this.focused;return e&&i}},showError:function(){return null!==this.error?this.error:!!(this.vanForm&&this.vanForm.showError&&this.validateFailed)||void 0},listeners:function(){return Object(s["a"])({},this.$listeners,{blur:this.onBlur,focus:this.onFocus,input:this.onInput,click:this.onClickInput,keypress:this.onKeypress})},labelStyle:function(){var t=this.getProp("labelWidth");if(t)return{width:Object(m["a"])(t)}},formValue:function(){return this.children&&(this.$scopedSlots.input||this.$slots.input)?this.children.value:this.value}},methods:{focus:function(){this.$refs.input&&this.$refs.input.focus()},blur:function(){this.$refs.input&&this.$refs.input.blur()},runValidator:function(t,e){return new Promise((function(i){var n=e.validator(t,e);if(Object(a["f"])(n))return n.then(i);i(n)}))},isEmptyValue:function(t){return Array.isArray(t)?!t.length:0!==t&&!t},runSyncRule:function(t,e){return(!e.required||!this.isEmptyValue(t))&&!(e.pattern&&!e.pattern.test(t))},getRuleMessage:function(t,e){var i=e.message;return Object(a["d"])(i)?i(t,e):i},runRules:function(t){var e=this;return t.reduce((function(t,i){return t.then((function(){if(!e.validateFailed){var t=e.formValue;return i.formatter&&(t=i.formatter(t,i)),e.runSyncRule(t,i)?i.validator?e.runValidator(t,i).then((function(n){!1===n&&(e.validateFailed=!0,e.validateMessage=e.getRuleMessage(t,i))})):void 0:(e.validateFailed=!0,void(e.validateMessage=e.getRuleMessage(t,i)))}}))}),Promise.resolve())},validate:function(t){var e=this;return void 0===t&&(t=this.rules),new Promise((function(i){t||i(),e.resetValidation(),e.runRules(t).then((function(){e.validateFailed?i({name:e.name,message:e.validateMessage}):i()}))}))},validateWithTrigger:function(t){if(this.vanForm&&this.rules){var e=this.vanForm.validateTrigger===t,i=this.rules.filter((function(i){return i.trigger?i.trigger===t:e}));this.validate(i)}},resetValidation:function(){this.validateFailed&&(this.validateFailed=!1,this.validateMessage="")},updateValue:function(t,e){void 0===e&&(e="onChange"),t=Object(a["c"])(t)?String(t):"";var i=this.maxlength;if(Object(a["c"])(i)&&t.length>i&&(t=this.value&&this.value.length===+i?this.value:t.slice(0,i)),"number"===this.type||"digit"===this.type){var n="number"===this.type;t=Object(h["a"])(t,n,n)}this.formatter&&e===this.formatTrigger&&(t=this.formatter(t));var r=this.$refs.input;r&&t!==r.value&&(r.value=t),t!==this.value&&this.$emit("input",t)},onInput:function(t){t.target.composing||this.updateValue(t.target.value)},onFocus:function(t){this.focused=!0,this.$emit("focus",t);var e=this.getProp("readonly");e&&this.blur()},onBlur:function(t){this.focused=!1,this.updateValue(this.value,"onBlur"),this.$emit("blur",t),this.validateWithTrigger("onBlur"),u()},onClick:function(t){this.$emit("click",t)},onClickInput:function(t){this.$emit("click-input",t)},onClickLeftIcon:function(t){this.$emit("click-left-icon",t)},onClickRightIcon:function(t){this.$emit("click-right-icon",t)},onClear:function(t){Object(f["c"])(t),this.$emit("input",""),this.$emit("clear",t)},onKeypress:function(t){var e=13;if(t.keyCode===e){var i=this.getProp("submitOnEnter");i||"textarea"===this.type||Object(f["c"])(t),"search"===this.type&&this.blur()}this.$emit("keypress",t)},adjustSize:function(){var t=this.$refs.input;if("textarea"===this.type&&this.autosize&&t){t.style.height="auto";var e=t.scrollHeight;if(Object(a["e"])(this.autosize)){var i=this.autosize,n=i.maxHeight,r=i.minHeight;n&&(e=Math.min(e,n)),r&&(e=Math.max(e,r))}e&&(t.style.height=e+"px")}},genInput:function(){var t=this.$createElement,e=this.type,i=this.getProp("disabled"),n=this.getProp("readonly"),a=this.slots("input"),o=this.getProp("inputAlign");if(a)return t("div",{class:F("control",[o,"custom"]),on:{click:this.onClickInput}},[a]);var l={ref:"input",class:F("control",o),domProps:{value:this.value},attrs:Object(s["a"])({},this.$attrs,{name:this.name,disabled:i,readonly:n,placeholder:this.placeholder}),on:this.listeners,directives:[{name:"model",value:this.value}]};if("textarea"===e)return t("textarea",r()([{},l]));var c,u=e;return"number"===e&&(u="text",c="decimal"),"digit"===e&&(u="tel",c="numeric"),t("input",r()([{attrs:{type:u,inputmode:c}},l]))},genLeftIcon:function(){var t=this.$createElement,e=this.slots("left-icon")||this.leftIcon;if(e)return t("div",{class:F("left-icon"),on:{click:this.onClickLeftIcon}},[this.slots("left-icon")||t(g["a"],{attrs:{name:this.leftIcon,classPrefix:this.iconPrefix}})])},genRightIcon:function(){var t=this.$createElement,e=this.slots,i=e("right-icon")||this.rightIcon;if(i)return t("div",{class:F("right-icon"),on:{click:this.onClickRightIcon}},[e("right-icon")||t(g["a"],{attrs:{name:this.rightIcon,classPrefix:this.iconPrefix}})])},genWordLimit:function(){var t=this.$createElement;if(this.showWordLimit&&this.maxlength){var e=(this.value||"").length;return t("div",{class:F("word-limit")},[t("span",{class:F("word-num")},[e]),"/",this.maxlength])}},genMessage:function(){var t=this.$createElement;if(!this.vanForm||!1!==this.vanForm.showErrorMessage){var e=this.errorMessage||this.validateMessage;if(e){var i=this.getProp("errorMessageAlign");return t("div",{class:F("error-message",i)},[e])}}},getProp:function(t){return Object(a["c"])(this[t])?this[t]:this.vanForm&&Object(a["c"])(this.vanForm[t])?this.vanForm[t]:void 0},genLabel:function(){var t=this.$createElement,e=this.getProp("colon")?":":"";return this.slots("label")?[this.slots("label"),e]:this.label?t("span",[this.label+e]):void 0}},render:function(){var t,e=arguments[0],i=this.slots,n=this.getProp("disabled"),r=this.getProp("labelAlign"),s={icon:this.genLeftIcon},a=this.genLabel();a&&(s.title=function(){return a});var o=this.slots("extra");return o&&(s.extra=function(){return o}),e(v["a"],{attrs:{icon:this.leftIcon,size:this.size,center:this.center,border:this.border,isLink:this.isLink,required:this.required,clickable:this.clickable,titleStyle:this.labelStyle,valueClass:F("value"),titleClass:[F("label",r),this.labelClass],arrowDirection:this.arrowDirection},scopedSlots:s,class:F((t={error:this.showError,disabled:n},t["label-"+r]=r,t["min-height"]="textarea"===this.type&&!this.autosize,t)),on:{click:this.onClick}},[e("div",{class:F("body")},[this.genInput(),this.showClear&&e(g["a"],{attrs:{name:"clear"},class:F("clear"),on:{touchstart:this.onClear}}),this.genRightIcon(),i("button")&&e("div",{class:F("button")},[i("button")])]),this.genWordLimit(),this.genMessage()])}})},"5c56":function(t,e,i){},"66b9":function(t,e,i){"use strict";i("68ef"),i("9d70"),i("3743"),i("e3b3"),i("bc1b")},"6b41":function(t,e,i){"use strict";var n=i("d282"),r=i("b1d2"),s=i("ad06"),a=Object(n["a"])("nav-bar"),o=a[0],l=a[1];e["a"]=o({props:{title:String,fixed:Boolean,zIndex:[Number,String],leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,border:{type:Boolean,default:!0}},data:function(){return{height:null}},mounted:function(){this.placeholder&&this.fixed&&(this.height=this.$refs.navBar.getBoundingClientRect().height)},methods:{genLeft:function(){var t=this.$createElement,e=this.slots("left");return e||[this.leftArrow&&t(s["a"],{class:l("arrow"),attrs:{name:"arrow-left"}}),this.leftText&&t("span",{class:l("text")},[this.leftText])]},genRight:function(){var t=this.$createElement,e=this.slots("right");return e||(this.rightText?t("span",{class:l("text")},[this.rightText]):void 0)},genNavBar:function(){var t,e=this.$createElement;return e("div",{ref:"navBar",style:{zIndex:this.zIndex},class:[l({fixed:this.fixed,"safe-area-inset-top":this.safeAreaInsetTop}),(t={},t[r["b"]]=this.border,t)]},[e("div",{class:l("content")},[this.hasLeft()&&e("div",{class:l("left"),on:{click:this.onClickLeft}},[this.genLeft()]),e("div",{class:[l("title"),"van-ellipsis"]},[this.slots("title")||this.title]),this.hasRight()&&e("div",{class:l("right"),on:{click:this.onClickRight}},[this.genRight()])])])},hasLeft:function(){return this.leftArrow||this.leftText||this.slots("left")},hasRight:function(){return this.rightText||this.slots("right")},onClickLeft:function(t){this.$emit("click-left",t)},onClickRight:function(t){this.$emit("click-right",t)}},render:function(){var t=arguments[0];return this.placeholder&&this.fixed?t("div",{class:l("placeholder"),style:{height:this.height+"px"}},[this.genNavBar()]):this.genNavBar()}})},"8a0b":function(t,e,i){},af60:function(t,e,i){},baaf:function(t,e,i){"use strict";i("af60")},be7f:function(t,e,i){"use strict";i("68ef"),i("9d70"),i("3743"),i("1a04"),i("1146")},ede4:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login-container"},[i("van-nav-bar",{attrs:{title:"注册/登录","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),i("van-form",{ref:"loginForm",attrs:{"show-error-message":!1,"show-error":!1,"validate-first":""},on:{submit:t.loginFn,failed:t.failFn}},[i("van-cell-group",[i("van-field",{attrs:{"icon-prefix":"iconfont","left-icon":"iconfont iconshouji",clearable:"",placeholder:"请输入手机号",name:"mobile",rules:t.userFormValidate.mobile},model:{value:t.userForm.mobile,callback:function(e){t.$set(t.userForm,"mobile",e)},expression:"userForm.mobile"}}),i("van-field",{attrs:{"icon-prefix":"iconfont","left-icon":"iconfont iconyanzhengma",placeholder:"请输入验证码",name:"code",rules:t.userFormValidate.code},scopedSlots:t._u([{key:"button",fn:function(){return[t.isCountDownShow?i("van-count-down",{attrs:{time:1e4,format:"ss s"},on:{finish:t.finishCountFn}}):i("van-button",{staticClass:"send-btn",attrs:{size:"small",type:"primary"},on:{click:function(e){return e.preventDefault(),t.sendCodeFn(e)}}},[t._v("发送验证码")])]},proxy:!0}]),model:{value:t.userForm.code,callback:function(e){t.$set(t.userForm,"code",e)},expression:"userForm.code"}})],1),i("div",{staticClass:"login-btn"},[i("van-button",{attrs:{type:"info",block:""}},[t._v("登录")])],1)],1)],1)},r=[],s=i("ade3"),a=(i("68ef"),i("40db"),i("d282")),o=i("a142"),l=i("4598"),c=i("68ed"),u=1e3,h=60*u,f=60*h,d=24*f;function m(t){var e=Math.floor(t/d),i=Math.floor(t%d/f),n=Math.floor(t%f/h),r=Math.floor(t%h/u),s=Math.floor(t%u);return{days:e,hours:i,minutes:n,seconds:r,milliseconds:s}}function g(t,e){var i=e.days,n=e.hours,r=e.minutes,s=e.seconds,a=e.milliseconds;if(-1===t.indexOf("DD")?n+=24*i:t=t.replace("DD",Object(c["b"])(i)),-1===t.indexOf("HH")?r+=60*n:t=t.replace("HH",Object(c["b"])(n)),-1===t.indexOf("mm")?s+=60*r:t=t.replace("mm",Object(c["b"])(r)),-1===t.indexOf("ss")?a+=1e3*s:t=t.replace("ss",Object(c["b"])(s)),-1!==t.indexOf("S")){var o=Object(c["b"])(a,3);t=-1!==t.indexOf("SSS")?t.replace("SSS",o):-1!==t.indexOf("SS")?t.replace("SS",o.slice(0,2)):t.replace("S",o.charAt(0))}return t}function v(t,e){return Math.floor(t/1e3)===Math.floor(e/1e3)}var p,b=Object(a["a"])("count-down"),y=b[0],F=b[1],S=y({props:{millisecond:Boolean,time:{type:[Number,String],default:0},format:{type:String,default:"HH:mm:ss"},autoStart:{type:Boolean,default:!0}},data:function(){return{remain:0}},computed:{timeData:function(){return m(this.remain)},formattedTime:function(){return g(this.format,this.timeData)}},watch:{time:{immediate:!0,handler:"reset"}},activated:function(){this.keepAlivePaused&&(this.counting=!0,this.keepAlivePaused=!1,this.tick())},deactivated:function(){this.counting&&(this.pause(),this.keepAlivePaused=!0)},beforeDestroy:function(){this.pause()},methods:{start:function(){this.counting||(this.counting=!0,this.endTime=Date.now()+this.remain,this.tick())},pause:function(){this.counting=!1,Object(l["a"])(this.rafId)},reset:function(){this.pause(),this.remain=+this.time,this.autoStart&&this.start()},tick:function(){o["b"]&&(this.millisecond?this.microTick():this.macroTick())},microTick:function(){var t=this;this.rafId=Object(l["c"])((function(){t.counting&&(t.setRemain(t.getRemain()),t.remain>0&&t.microTick())}))},macroTick:function(){var t=this;this.rafId=Object(l["c"])((function(){if(t.counting){var e=t.getRemain();v(e,t.remain)&&0!==e||t.setRemain(e),t.remain>0&&t.macroTick()}}))},getRemain:function(){return Math.max(this.endTime-Date.now(),0)},setRemain:function(t){this.remain=t,this.$emit("change",this.timeData),0===t&&(this.pause(),this.$emit("finish"))}},render:function(){var t=arguments[0];return t("div",{class:F()},[this.slots("default",this.timeData)||this.formattedTime])}}),x=(i("e7e5"),i("d399")),k=i("db85"),w=Object(a["a"])("form"),O=w[0],$=w[1],j=O({props:{colon:Boolean,disabled:Boolean,readonly:Boolean,labelWidth:[Number,String],labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,errorMessageAlign:String,submitOnEnter:{type:Boolean,default:!0},validateTrigger:{type:String,default:"onBlur"},showError:{type:Boolean,default:!0},showErrorMessage:{type:Boolean,default:!0}},provide:function(){return{vanForm:this}},data:function(){return{fields:[]}},methods:{getFieldsByNames:function(t){return t?this.fields.filter((function(e){return-1!==t.indexOf(e.name)})):this.fields},validateSeq:function(t){var e=this;return new Promise((function(i,n){var r=[],s=e.getFieldsByNames(t);s.reduce((function(t,e){return t.then((function(){if(!r.length)return e.validate().then((function(t){t&&r.push(t)}))}))}),Promise.resolve()).then((function(){r.length?n(r):i()}))}))},validateFields:function(t){var e=this;return new Promise((function(i,n){var r=e.getFieldsByNames(t);Promise.all(r.map((function(t){return t.validate()}))).then((function(t){t=t.filter((function(t){return t})),t.length?n(t):i()}))}))},validate:function(t){return t&&!Array.isArray(t)?this.validateField(t):this.validateFirst?this.validateSeq(t):this.validateFields(t)},validateField:function(t){var e=this.fields.filter((function(e){return e.name===t}));return e.length?new Promise((function(t,i){e[0].validate().then((function(e){e?i(e):t()}))})):Promise.reject()},resetValidation:function(t){t&&!Array.isArray(t)&&(t=[t]);var e=this.getFieldsByNames(t);e.forEach((function(t){t.resetValidation()}))},scrollToField:function(t,e){this.fields.some((function(i){return i.name===t&&(i.$el.scrollIntoView(e),!0)}))},addField:function(t){this.fields.push(t),Object(k["a"])(this.fields,this)},removeField:function(t){this.fields=this.fields.filter((function(e){return e!==t}))},getValues:function(){return this.fields.reduce((function(t,e){return t[e.name]=e.formValue,t}),{})},onSubmit:function(t){t.preventDefault(),this.submit()},submit:function(){var t=this,e=this.getValues();this.validate().then((function(){t.$emit("submit",e)})).catch((function(i){t.$emit("failed",{values:e,errors:i}),t.scrollToError&&t.scrollToField(i[0].name)}))}},render:function(){var t=arguments[0];return t("form",{class:$(),on:{submit:this.onSubmit}},[this.slots()])}}),C=(i("66b9"),i("b650")),T=(i("0653"),i("34e9")),B=(i("be7f"),i("565f")),I=(i("5246"),i("6b41")),M=i("b775");function A(t){return Object(M["b"])({url:"/app/v1_0/authorizations",method:"post",data:t})}function P(t){return Object(M["b"])({url:"/app/v1_0/sms/codes/".concat(t),method:"get"})}var R={name:"Login",components:(p={},Object(s["a"])(p,I["a"].name,I["a"]),Object(s["a"])(p,B["a"].name,B["a"]),Object(s["a"])(p,T["a"].name,T["a"]),Object(s["a"])(p,C["a"].name,C["a"]),Object(s["a"])(p,j.name,j),Object(s["a"])(p,x["a"].name,x["a"]),Object(s["a"])(p,S.name,S),p),props:{},data:function(){return{userForm:{mobile:"13933333333",code:"246810"},userFormValidate:{mobile:[{required:!0,message:"请填写手机号"}],code:[{required:!0,message:"请填写验证码"}]},isCountDownShow:!1}},computed:{},watch:{},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{loginFn:function(){var t=this;x["a"].loading({message:"登录中...",forbidClick:!0}),A(this.userForm).then((function(e){t.$toast.success("登录成功"),t.$store.commit("setUser",e.data),t.$router.push("/")}),(function(e){console.log(e.response),t.$toast.fail("手机号或者验证码错误")}))},failFn:function(t){this.$toast(t.errors[0].message)},sendCodeFn:function(){var t=this;this.$refs.loginForm.validate("mobile"),this.isCountDownShow=!0,P(this.userForm.mobile).then((function(t){}),(function(e){var i="";i=e&&e.response&&429===e.response.status?"发送太频繁了，请稍后再试":"mobile"===e.name?e.message:"未知错误，请稍后再试",t.$toast(i)}))},finishCountFn:function(){this.isCountDownShow=!1}}},D=R,E=(i("baaf"),i("2877")),V=Object(E["a"])(D,n,r,!1,null,"ff6a7d34",null);e["default"]=V.exports}}]);
//# sourceMappingURL=chunk-229a0a86.84880feb.js.map